<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="de">
  <head>
    <title>Hilfe: Tippspiel-Addon 1.20</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" >
    <style type="text/css">
      body {padding:0.8em; max-width:50em;margin:auto;font-size:94%; background-color: #ffffff; color: #000000; font-family:Tahoma, Verdana, sans-serif; }
      li {padding: 0; margin-bottom: 3px; font-family:monospace;color:#30a;}
      a:hover, a:active {text-decoration: overline underline;}
      hr {background-color:black;color:white;border:0;height:0.1em;}
      h1 {text-align:center; font-size:120%;font-weight: bold;}
      h2 { font-size: 110%;font-weight: bold;}
      h3 { font-size: 105%;font-weight: bold;margin-bottom:0.2em;}
      h4 { font-weight: bold;margin-left:2em;margin-bottom:0.1em;}
      ul {list-style-type:none;}
      code,pre {color:#30a;}
    
    </style>
  </head>
  <body>
<h1>Hilfe: Tippspiel-Addon 1.20</h1>
<p>Mit dem Tippspiel-Addon ist es möglich, auf seiner Homepage mit 
LigaManager-Ligen eine Tipprunde zu veranstalten. Es kann zwischen Ergebnis- und 
Tendenzmodus gewählt werden. Vorraussetzung für den Einsatz dieses Tippspiel-AddOns ist eine vorhandene 
Installation des LigaManager Online 3.02b.</p>
<h2>Installation</h2>
<p>Die Dateien der lmotippspiel.zip müssen unter Beibehaltung der Ordnerstruktur 
in das lmo-Verzeichnis entpackt werden.Dabei werden folgende Dateien überschrieben:</p>
<ul>
  <li>lmo.php
  <li>lmoadmin.php
  <li>lmo-adminedit.php
  <li>lmo-adminmain.php
  <li>lmo-adminpad.php
  <li>lmo-langload.php
  <li>lmo-showdir.php
  <li>lmo-showmain.php
  <li>lmo-start.php
  <li>lmo-savefile.php.</ul>
<p>
Wer also in diesen Dateien Änderungen vorgenommen hat, sollte vorher
Sicherungskopien anlegen. Es ist wichtig, dass am Anfang der lmo.php, oder von wo auch immer die 
<code>lmo-start.php</code> aufgerufen wird, folgende Zeile steht:</p>
<pre>&lt;?PHP if($action=="tipp"){session_start();}?></pre>
<p>Dabei wird, falls eine Seite aus dem Tippspiel-Bereich angefordert&nbsp; 
wird, eine Session gestartet. Achte beim Hochladen der Dateien auf folgendes: </p>
<ul>
  <li>Folgende Dateien müssen im <strong>Textmodus</strong> übertragen werden:
    <ul>
      <li>lmo-tippcfg.txt </li>
      <li>lmo-tipplang.txt </li>
      <li>lmo-tippauth.txt</li>
    </ul>
  </li>
  <li>Folgende <strong>Zugriffsrechte (chmod)</strong> müssen gesetzt werden:
    <ul>
      <li>777 - lmo-tippcfg.txt </li>
      <li>666 - das tipps-Verzeichnis</li>
      <li>666 - lmo-tippauth.txt </li>
    </ul>
  </li>
</ul>
<p>Wer seine Dateien mit den Zugriffsrechten 666 in einem 
extra Verzeichnis speichert, kann den Pfad der <code>"lmo-tippauth.txt"</code> 
in der <code>"lmo-tippcfgload.php"</code> anpassen. </p>
<p>Wer nach dem chmod 600 Probleme beim Abspeichern der Tipps 
hat (Schreibrechte), der muss das tipps-Verzeichnis mit chmod 777 versehen und 
es mit htaccess schützen.</p>
<p><em>Das Tippspiel-AddOn beinhaltet das CSS für Netscape 4 und dessen Einbindung 
(von rudi). Der eingebaute Joker-Hack ist von Ufuk Altinkaynak (horizont).</em></p>
<p>Innerhalb des Verzeichnis <code>"tipps"</code> müssen folgende Unterverzeichnisse 
verhanden sein:
<pre>einsicht/
auswert/
auswert/vereine/</pre>
<p>Im Verzeichnis <code>"tipps"</code> werden alle Tipps gespeichert, 
im Verzeichnis <code>"tipps/auswert"</code> alle Tippauswertungen, 
im Verzeichnis <code>"tipps/ensicht"</code> alle Tippeinsichten.<br>
Die Tipp-Dateien haben das Schema <code>"<em>liga</em>_<em>nickname</em>.tip"</code>, die 
Auswertungs-Dateien werden nach dem Schema <code>"<em>liga</em>.aus"</code> erstellt. Die Datei 

<code>"<em>gesamt</em>.aus"</code> beinhaltet die Gesamtwertung.</p>

<h2>Administration</h2>
<p>Das Tippspiel wird über den Administrations-Bereich des LMO verwaltet. 
Über den neuen Menüpunkt "Tippspiel" kann dort auf die Tippauswertung, 
Tipp-Userverwaltung und Tippoptionen zugegriffen werden, allerdings nur von 
einem Admin mit Voll-Zugriff. </p>
<h3>Tippabgabezeit</h3>
<p>Um die Tippabgabe zu ermöglichen, muss für jeden Spieltag einer Liga 
<strong>mindestens ein Spieltagsdatum</strong> angegeben sein. Die Tippabgabe ist dann bis 
zum Vortag, 24 Uhr möglich. Ist für ein Spiel ein Anstoßtermin eingegeben, dann 
ist die Tippabgabe für dieses Spiel bis zu einem einstellbaren Zeitpunkt vor dem 
Anstoß möglich.</p>

<p>Die Tippabgabezeit richtet sich dabei nach der Serverzeit. 
Bevor man das Tippspiel öffentlich in betrieb setzt sollte man diese zeit 
kontrollieren, entweder indem man auf das letzte Auswertungsdatum schaut oder
</p>
<pre>&lt;?php<br>
$jetzt = date("H:i:s m.d.y");<br>
echo ("$jetzt");<br>
?&gt;</pre>
<p>
durchlaufen lässt und schnell auf die Uhr schaut!! (Dank an thire2 für diesen 
Hinweis)</p>
<h3>Update</h3>

<p>Durch das Tippspiel-AddOn werden keine bekannten anderen Addons oder Hacks überschrieben.<br>
Bei einem Update werden bereits abgegebene Tipps  weiterverarbeitet.</p>

<p><strong>Wer das Tippspiel bereits in Betrieb hat, sollte aber darauf achten, dass 
die <code>lmo-tippauth.txt</code> nicht überschrieben wird, da sonst alle Anmeldedaten 
verloren gehen.</strong></p>

<h3>Navigation in Frames:</h3>
<p>Wenn der LMO in ein Frameset eingebunden ist, und nachdem man ins Tippspiel 
eingeloggt war/ist, im Navigationsframe einen weiteren Link öffnet, der 
eigentlich in den Frame mit dem LMO zielt, öffnet sich unschönerweise ein neues 
Fenster. Das liegt daran, dass das Tippspiel, sobald man eingeloggt ist, für 
seinen Frame einen eigenen Namen vergibt. </p>
<h4>Lösung 1 (mit JavaScript)</h4>
Es kann hier nicht herkömmlich mit Link und 'target' gearbeitet werden. Man muss den Frame 
mittels 'Nummer' über JavaScript ansteuern. </p>
<p>Ersetze im Navigationsframe den Link auf das Tippspiel durch den folgenden:</p>
<pre>&lt;a href="javascript:loadURL('lmo/lmo.php?action=tipp')"&gt;zum Tippspiel&lt;/a&gt;</pre>
<p>(Der Link beinhaltet kein 'target'!)</p>
<p>
Auch alle anderen Links im Navigationsframe müssen ebenfalls nach diesem Schema 
aufgebaut werden.</p>
<p>In der selben Datei (mit den Links) kommt dann zwischen <code>&lt;head&gt;</code> und 
<code>&lt;/head&gt;</code> noch folgender Script-Block:</p>
<pre>&lt;script type="text/javascript"&gt;
function loadURL(destination){
  parent.frames[2].location.href = destination;
};
&lt;/SCRIPT&gt;
</pre>
<p>
(Möglicherweise muss die '2' durch '3' oder '1', je nach Ziel-Frame 
ersetzt werden)</p>

<h4>Lösung 2 (ohne JavaScript):</h4>
<p>Bei allen Links vom Navigationsframe zum LMO nicht direkt auf die lmo.php 
verweisen, sondern auf eine Datei (ich nenn sie mal lmoframe.php), die noch mal 
ein Unterframe erstellt. Erst in diesen Unterframe wird der LMO geladen. z.B. 
der Link zum Tippspiel sieht dann so aus: <code>lmoframe.php?action=tipp</code></p>
<p>
<p>So schaut die lmoframe.php aus:</p>
<pre>
&lt;?PHP $qs=getenv("QUERY_STRING"); ?&gt;
&lt;frameset ROWS="*"&gt;
&lt;frame SRC="lmo.php?&lt;?PHP echo $qs; ?&gt;" Name="lmo" MARGINWIDTH=0 MARGINHEIGHT=0 NORESIZE FRAMEBORDER="No" BORDER=0&gt;
&lt;/frameset&gt;
</pre>
<p>
So wird, wenn man im Tippspiel eingeloggt ist, der Framename "lmo" geändert. Die 
Links vom Navigationsframe können also problemlos als target den Framenamen 
haben, in der die lmoframe.php geladen ist.</p>
</body>
</html>